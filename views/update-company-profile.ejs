<html lang="<%- __('lang') %>">
  <head>
    <%- include('partials/head', { title: __('update_company') }) %>
  </head>
  <body class="dash-body min-vh-100">
    <!-- Sidebar -->
    <%- include('partials/sidebar') %>

    <!-- Main content -->
    <main class="position-relative">
      <!-- Navbar -->
      <%- include('partials/navbar') %>
      <section class="page-titel px-mp mt-3 w-100">
        <div class="p-title mb-4">
          <%-__('update')%>:
          <span class="text-uppercase text-primary">
            <%-company.company_name%>
          </span>
        </div>
      </section>

      <section class="content px-25 pb-5">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-10">
              <div class="card border-0">
                <div class="card-body p-45">
                  <h6 class="mb-3"><%-__('update_company_profile')%></h6>

                  <form id="updateCompanyProfile">
                    <div class="col-md-6 mb-3">
                      <label for="company_name" class="form-label">
                        <%-__('company_name')%>
                      </label>
                      <input
                        type="text"
                        class="form-control text-capitalize"
                        id="company_name"
                        value="<%= company.company_name || '' %>"
                      />
                    </div>
                    <input
                      type="hidden"
                      id="companyId"
                      value="<%= company._id %>"
                    />
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="email" class="form-label">
                          <%-__('email')%>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          id="email"
                          value="<%= company.email || '' %>"
                        />
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="phone" class="form-label">
                          <%-__('phone')%>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          id="phone"
                          value="<%= company.phone || '' %>"
                        />
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="fax" class="form-label">
                          <%-__('fax')%>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          id="fax"
                          value="<%= company.fax || '' %>"
                        />
                      </div>
                    </div>

                    <div class="form-title mb-2 mt-3">
                      <%= __("company_address") %>
                    </div>

                    <div class="mb-3">
                      <label class="form-label" for="street">
                        <%= __("street") %>
                      </label>
                      <input
                        type="text"
                        class="form-control"
                        id="street"
                        value="<%= company.address?.street || '' %>"
                      />
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="city"
                          ><%= __("city") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="city"
                          value="<%= company.address?.city || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="postalCode">
                          <%= __("postal_code") %>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          id="postalCode"
                          value="<%= company.address?.postalCode || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label"><%= __("country") %></label>
                        <select id="country">
                          <option
                            class="text-capitalize"
                            value="<%= company.address?.country%>"
                            disabled
                            selected
                            hidden
                          >
                            <%= company.address?.country%>
                          </option>
                          <%- include('partials/_countriesOptions') %>
                        </select>
                      </div>
                    </div>

                    <div class="form-title mb-2 mt-3">
                      <%= __("company_legal_info") %>
                    </div>
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="registry"
                          ><%= __("registry") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="registry"
                          value="<%= company.registry || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="registry_no"
                          ><%= __("registry_no") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="registry_no"
                          value="<%= company.registry_no || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="tax_idx"
                          ><%= __("tax_idx") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="tax_idx"
                          value="<%= company.tax_id || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="vat_id"
                          ><%= __("vat_id") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="vat_id"
                          value="<%= company.vat_id || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="representative"
                          ><%= __("representative") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="representative"
                          value="<%= company.representative || '' %>"
                        />
                      </div>
                    </div>

                    <div class="form-title mb-2 mt-3">
                      <%= __("bank_details") %>
                    </div>
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="bank_name"
                          ><%= __("bank_name") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="bank_name"
                          value="<%= company.bank_details?.bank_name || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="iban"
                          ><%= __("iban") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="iban"
                          value="<%= company.bank_details?.iban || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="bic_swift"
                          ><%= __("bic_swift") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="bic_swift"
                          value="<%= company.bank_details?.bic_swift || '' %>"
                        />
                      </div>

                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="bank_address"
                          ><%= __("bank_address") %></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="bank_address"
                          value="<%= company.bank_details?.bank_address || '' %>"
                        />
                      </div>
                    </div>

                    <div class="mt-3 mb-4">
                      <div
                        class="form-img-before <%= company.logo ? 'd-none' : '' %>"
                      >
                        <label class="form-label" for="logo"
                          ><%= __('company_logo') %></label
                        >
                        <div
                          class="dfacjc mt-2 custom-img-input"
                          id="toggleLogoImage"
                        >
                          <i class="bi-camera"></i>
                        </div>
                      </div>

                      <div
                        class="form-image <%= company.logo ? '' : 'd-none' %>"
                      >
                        <img
                          class="w-full-img"
                          src="<%= company.logo %>"
                          alt="logo_image"
                        />
                        <button type="button" class="btn btn-sm btn-removeImg">
                          <i class="bi-trash"></i>
                        </button>
                      </div>

                      <input type="file" class="d-none" id="logo" />
                    </div>

                    <div class="mt-3">
                      <label class="check-container">
                        <span class="statusText"> <%= __('active') %> </span>
                        <input type="checkbox" id="isActive" <%=
                        company.isActive ? 'checked' : '' %> />
                        <span class="checkmark"></span>
                      </label>
                    </div>

                    <button
                      id="updateCompanyButton"
                      class="btn btn-primary m-w-half mt-4 mb-2"
                    >
                      <%= __("save") %>
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <%- include('partials/footer') %>
    </main>

    <script>
      window.translations = {
        // API Messages
        company_created_successfully:
          "<%- __('company_created_successfully') %>",
        email_already_exists: "<%- __('email_already_exists') %>",
        company_already_exists_at_address:
          "<%- __('company_already_exists_at_address') %>",
        server_error: "<%- __('server_error') %>",
        company_updated_successfully:
          "<%= __('company_updated_successfully') %>",
        // Validation
        company_name_required: "<%- __('company_name_required') %>",
        email_required: "<%- __('email_required') %>",
        phone_required: "<%- __('phone_required') %>",
        street_required: "<%- __('street_required') %>",
        city_required: "<%- __('city_required') %>",
        postalCode_required: "<%- __('postal_code_required') %>",
        country_required: "<%- __('country_required') %>",
        tax_or_vat_required: "<%- __('tax_or_vat_required') %>",
        bank_name_required: "<%- __('bank_name_required') %>",
        iban_required: "<%- __('iban_required') %>",
        bic_swift_required: "<%- __('bic_swift_required') %>",
        field_required: "<%- __('field_required') %>",
        image_validation: "<%- __('image_validation') %>",
        image_size_limit: "<%- __('image_size_limit') %>",
        loading: "<%- __('loading') %>",
        save: "<%- __('save') %>",
        saved: "<%- __('saved') %>",
      };
    </script>

    <!-- javascript -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js"
      integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+"
      crossorigin="anonymous"
    ></script>
    <script src="/public/js/theme.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        new SlimSelect({
          select: "#country",
          settings: {
            placeholderText: "<%-__('country')%>",
            showSearch: true,
          },
        });
      });
    </script>
    <script
      type="module"
      src="/public/apicalls/updateCompanyProfile.js"
    ></script>
  </body>
</html>
