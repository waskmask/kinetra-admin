<html lang="<%- __('lang') %>">
  <head>
    <%- include('partials/head', { title: __('add_inventory') }) %>
  </head>
  <body class="dash-body min-vh-100">
    <!-- Sidebar -->
    <%- include('partials/sidebar') %>

    <!-- Main content -->
    <main class="position-relative">
      <!-- Navbar -->
      <%- include('partials/navbar') %>
      <section class="page-titel mb-4 px-mp mt-3 w-100">
        <div class="p-title"><%-storage.name%></div>
        <div class="p-subtitle">
          <%-storage.address.street_address%>, <%-storage.address.postal_code%>,
          <%-storage.address.city%>, <%-storage.address.country%>
        </div>
      </section>

      <section class="content px-25 pb-5">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-5">
              <div class="card border-0">
                <div class="card-body p-45">
                  <h6 class="mb-3"><%-__('update_inventory')%></h6>

                  <form id="updateInventory" data-id="<%-storage._id%>">
                    <div class="mb-3">
                      <label class="form-label"><%= __("products") %></label>
                      <select id="products" class="text-capitalize">
                        <option value="" disabled selected>
                          <%= __("select_a_product") %>
                        </option>
                        <% products.forEach(function(product) { %>
                        <option value="<%- product._id %>">
                          <%- product.product_name %> â€” <%-
                          product.product_grade %> (<%- product.unit_type %>)
                        </option>
                        <% }); %>
                      </select>
                    </div>

                    <div class="mb-3">
                      <label for="quantity" class="form-label">
                        <%-__('quantity')%>
                      </label>
                      <input type="number" class="form-control" id="quantity" />
                    </div>

                    <button
                      id="addInventoryButton"
                      class="btn btn-primary m-w-half mt-4 mb-2"
                    >
                      <%= __("save") %>
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <%- include('partials/footer') %>
    </main>

    <script>
      window.translations = {
        invalid_price_format: "<%-__('invalid_price_format')%>",
        registration_failed: "<%-__('registration_failed')%>",
        product_name_required: "<%-__('product_name_required')%>",
        product_grade_req: "<%-__('product_grade_req')%>",
        select_unit_type: "<%-__('select_unit_type')%>",
        product_price_req: "<%-__('product_price_req')%>",
        product_added: "<%-__('product_added')%>",
        loading: "<%-__('loading')%>",
        save: "<%-__('save')%>",
        invalid_input: "<%-__('invalid_input')%>",
        storage_not_found: "<%-__('storage_not_found')%>",
        product_not_found: "<%-__('product_not_found')%>",
        not_enough_stock_to_hold: "<%-__('not_enough_stock_to_hold')%>",
        not_enough_stock_to_remove: "<%-__('not_enough_stock_to_remove')%>",
        not_enough_held_stock_to_dispatch:
          "<%-__('not_enough_held_stock_to_dispatch')%>",
        not_enough_held_stock_to_release:
          "<%-__('not_enough_held_stock_to_release')%>",
        unknown_error: "<%-__('unknown_error')%>",
        select_product: "<%-__('select_product')%>",
        quantity_required: "<%-__('quantity_required')%>",
        inventory_added: "<%-__('inventory_added')%>",
      };
    </script>
    <!-- javascript -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js"
      integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+"
      crossorigin="anonymous"
    ></script>
    <script src="/public/js/theme.js"></script>

    <script>
      new SlimSelect({
        select: "#products",
        settings: {
          placeholderText: "<%-__('select_category')%>",
          showSearch: true,
        },
      });

      lucide.createIcons();
    </script>
    <script type="module" src="/public/apicalls/update-inventory.js"></script>
  </body>
</html>
